#N canvas 4 53 1835 914 10;
#X obj 321 61 s \$0-strtStop;
#X text 38 277 Arg 1: internal bpm on or off;
#X text 37 129 This metronome outputs 360 ticks per beat numbered 0-359.
If Ableton LINK session or MIDI clock is present it will latch onto
those \, otherwise it uses internal clock. It uses link object to also
generate the internal clock. It takes tempo and start/stop input and
outputs ticks 0-359;
#X text 37 223 It also outputs the tempo and clock source useful for
display purposes.;
#X floatatom 781 264 5 0 0 1 tempo - -;
#X obj 553 393 * 360;
#X obj 553 415 i;
#X obj 500 98 moses 10;
#X obj 1002 22 midirealtimein;
#X text 1317 63 MIDI 248 = clock \; 250 = start \; 251 = continue.
252 = stop;
#X obj 1002 73 sel 248 250 251 252 254, f 38;
#X obj 500 35 inlet tempo;
#X obj 606 267 r \$0-strtStop;
#X obj 1082 537 r link-session-present;
#N canvas 303 750 292 294 mstobpm 0;
#X obj 46 14 inlet;
#X obj 47 248 outlet;
#X obj 46 108 t b b;
#X obj 46 79 sel 0;
#X text 87 47 time 16th notes;
#X obj 46 145 timer;
#X obj 46 46 % 12;
#X obj 46 182 expr 30000 / $f1;
#X connect 0 0 6 0;
#X connect 2 0 5 0;
#X connect 2 1 5 1;
#X connect 3 0 2 0;
#X connect 5 0 7 0;
#X connect 6 0 3 0;
#X connect 7 0 1 0;
#X restore 889 702 pd mstobpm;
#X obj 934 754 r midi-clock-present;
#X obj 889 782 spigot 0;
#N canvas 465 318 729 612 average-bpm 0;
#X obj 98 20 inlet;
#X obj 360 226 + 1;
#X obj 251 189 t a b;
#X obj 330 224 f 0;
#X obj 48 185 array sum \$0-bpm-mean;
#X obj 98 42 t b a;
#X obj 48 229 + 0.499999;
#X obj 48 251 i;
#X obj 48 273 outlet;
#X obj 284 11 loadbang;
#X msg 284 33 const 120;
#X obj 251 280 array set \$0-bpm-mean 5;
#X obj 48 207 / 5;
#X obj 330 246 % 5;
#X obj 284 58 array define -k \$0-bpm-mean 5;
#A 0 120 120 120 120 120;
#X floatatom 230 131 5 0 0 0 - - -;
#X connect 0 0 5 0;
#X connect 1 0 3 1;
#X connect 2 0 11 0;
#X connect 2 1 3 0;
#X connect 3 0 1 0;
#X connect 3 0 13 0;
#X connect 4 0 12 0;
#X connect 5 0 4 0;
#X connect 5 1 2 0;
#X connect 5 1 15 0;
#X connect 6 0 7 0;
#X connect 7 0 8 0;
#X connect 9 0 10 0;
#X connect 10 0 14 0;
#X connect 12 0 6 0;
#X connect 13 0 11 1;
#X restore 889 725 pd average-bpm;
#X obj 1149 244 delay 1000;
#X msg 1100 254 1;
#X obj 1002 189 t b b b b, f 25;
#X msg 1149 219 stop;
#X msg 1149 269 0;
#X obj 1127 334 s midi-clock-present;
#X obj 1002 351 spigot 0;
#X obj 1029 589 spigot 0;
#X obj 1082 564 ==;
#X obj 634 334 ==;
#X obj 634 312 r midi-clock-present;
#X obj 1137 102 s midi-stop;
#X obj 1047 158 s midi-start;
#X obj 1470 368 midiout;
#X obj 1416 274 r midi-ticks;
#X msg 1416 296 248;
#X obj 1416 222 r midi-start;
#X obj 1092 130 s midi-cont;
#X obj 1470 303 r midi-cont;
#X msg 1470 325 251;
#X msg 1416 244 250;
#X obj 1547 224 r midi-stop;
#X msg 1547 246 252;
#X text 1445 195 clock through and out;
#X obj 1304 785 outlet Clock-source;
#X obj 553 359 spigot 1, f 12;
#X obj 553 443 t f b;
#X obj 603 459 r link-session-present;
#X obj 585 535 sel 0 1, f 23;
#X obj 585 667 s \$0-clock-source;
#X obj 1305 697 r \$0-clock-source;
#X obj 585 491 f 0;
#X obj 553 731 clockfix;
#X obj 1056 664 s \$0-clock-source;
#X obj 1029 611 t f b;
#X msg 1056 641 2;
#X msg 702 613 3;
#X obj 1304 738 change -1;
#X obj 779 831 change -1;
#X obj 553 204 f;
#X obj 581 108 r midi-clock-present;
#X obj 607 133 r link-session-present;
#X obj 581 160 sel 0;
#N canvas 33 53 815 554 LINK 0;
#X msg 355 126 tempo \$1;
#X msg 144 127 resolution \$1;
#X msg 247 147 reset \$1 \$2;
#X obj 247 126 pack f f;
#X floatatom 266 247 5 0 0 1 beat_time - -;
#X floatatom 180 285 5 0 0 1 step - -;
#X floatatom 378 246 5 0 0 1 tempo - -;
#X obj 59 105 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 1
1;
#X obj 180 199 abl_link~ 1 0 4 134;
#X floatatom 355 107 5 0 0 2 tempo - -;
#X floatatom 292 107 5 0 0 2 quantum - -;
#X floatatom 247 107 5 0 0 2 beat - -;
#X floatatom 144 107 5 0 0 2 resolution - -;
#X msg 59 125 connect \$1;
#X floatatom 510 231 5 0 0 0 - - -;
#X obj 510 209 r #abl_link_num_peers;
#X obj 32 45 loadbang;
#X obj 32 67 delay 100;
#X obj 267 326 wrap;
#X obj 285 31 inlet;
#X obj 388 273 i;
#X obj 267 388 outlet;
#X obj 388 295 outlet;
#X obj 510 261 > 0;
#X obj 510 283 s link-session-present;
#X connect 0 0 8 0;
#X connect 1 0 8 0;
#X connect 2 0 8 0;
#X connect 3 0 2 0;
#X connect 6 0 20 0;
#X connect 7 0 13 0;
#X connect 8 0 5 0;
#X connect 8 1 18 0;
#X connect 8 2 4 0;
#X connect 8 3 6 0;
#X connect 9 0 0 0;
#X connect 10 0 3 1;
#X connect 11 0 3 0;
#X connect 12 0 1 0;
#X connect 13 0 8 0;
#X connect 14 0 23 0;
#X connect 15 0 14 0;
#X connect 16 0 17 0;
#X connect 17 0 7 0;
#X connect 18 0 21 0;
#X connect 19 0 9 0;
#X connect 20 0 22 0;
#X connect 23 0 24 0;
#X restore 553 235 pd LINK - - - - - - - - - - - - -;
#X obj 585 574 f \$1;
#X msg 585 618 4;
#X obj 585 595 sel 0 1, f 12;
#X msg 625 619 1;
#X obj 1002 474 t f f;
#X text 1464 705 1 = internal bpm(set by og knob);
#X text 1464 765 4 = Hidden default bpm(off);
#X obj 781 434 spigot 1, f 12;
#X obj 1534 519 sel 1 2 3 4;
#X msg 1625 567 0;
#X msg 1568 569 1;
#X obj 1543 609 s metro-state;
#X text 1464 725 2 = MIDI BPM;
#X text 1464 745 3 = LINK BPM;
#X obj 1407 454 loadbang;
#X obj 1407 475 \$1;
#X obj 1407 551 s \$0-clock-source;
#X msg 1407 517 1;
#X obj 1407 496 sel 1 0;
#X msg 1436 517 4;
#X obj 1059 377 r midi-start;
#X msg 1059 399 0;
#X obj 1029 499 midiclocker;
#X text 151 511 the clockfix object ensures there are always 360 ticks
numbered 0-359. This is necessary when tempos increases to the point
where a tick is shorter than a dsp cycle in Pd (otherwise some numbers
get skipped).;
#X text 1107 499 24 ppq in \, 360 ppq out;
#N canvas 4 53 450 300 count24 0;
#X obj 163 87 i;
#X obj 266 210 + 1;
#X obj 159 132 t f f;
#X obj 246 173 sel 23;
#X msg 207 210 0;
#X obj 131 244 outlet;
#X obj 125 40 inlet;
#X obj 251 34 inlet;
#X connect 0 0 2 0;
#X connect 1 0 0 1;
#X connect 2 0 5 0;
#X connect 2 1 3 0;
#X connect 3 0 4 0;
#X connect 3 1 1 0;
#X connect 4 0 0 1;
#X connect 6 0 0 0;
#X connect 7 0 0 1;
#X restore 1002 426 pd count24;
#X obj 1100 307 t a a;
#X obj 300 31 tgl 15 0 empty empty empty 17 7 0 10 -262144 -1 -1 0
1;
#X obj 553 794 outlet;
#X obj 553 297 spigot 1;
#X obj 321 39 inlet;
#X text 365 40 start/stop;
#X obj 779 859 outlet;
#X text 825 861 Tempo;
#X connect 4 0 69 0;
#X connect 5 0 6 0;
#X connect 6 0 44 0;
#X connect 7 1 57 0;
#X connect 8 0 10 0;
#X connect 10 0 20 0;
#X connect 10 1 30 0;
#X connect 10 2 35 0;
#X connect 10 3 29 0;
#X connect 11 0 7 0;
#X connect 12 0 91 1;
#X connect 13 0 26 0;
#X connect 14 0 17 0;
#X connect 15 0 16 1;
#X connect 16 0 56 0;
#X connect 17 0 16 0;
#X connect 18 0 22 0;
#X connect 19 0 88 0;
#X connect 20 0 24 0;
#X connect 20 1 18 0;
#X connect 20 2 19 0;
#X connect 20 3 21 0;
#X connect 21 0 18 0;
#X connect 22 0 88 0;
#X connect 24 0 87 0;
#X connect 25 0 52 0;
#X connect 26 0 25 1;
#X connect 27 0 43 1;
#X connect 27 0 69 1;
#X connect 28 0 27 0;
#X connect 32 0 33 0;
#X connect 33 0 31 0;
#X connect 34 0 38 0;
#X connect 36 0 37 0;
#X connect 37 0 31 0;
#X connect 38 0 31 0;
#X connect 39 0 40 0;
#X connect 40 0 31 0;
#X connect 43 0 5 0;
#X connect 44 0 50 0;
#X connect 44 1 49 0;
#X connect 45 0 49 1;
#X connect 46 0 62 0;
#X connect 46 1 54 0;
#X connect 48 0 55 0;
#X connect 49 0 46 0;
#X connect 50 0 90 0;
#X connect 52 0 50 0;
#X connect 52 1 53 0;
#X connect 53 0 51 0;
#X connect 54 0 47 0;
#X connect 55 0 42 0;
#X connect 55 0 70 0;
#X connect 56 0 94 0;
#X connect 57 0 61 0;
#X connect 58 0 60 0;
#X connect 59 0 60 0;
#X connect 60 0 57 0;
#X connect 61 0 91 0;
#X connect 61 1 4 0;
#X connect 62 0 64 0;
#X connect 63 0 47 0;
#X connect 64 0 63 0;
#X connect 64 1 65 0;
#X connect 65 0 47 0;
#X connect 66 0 14 0;
#X connect 66 1 84 0;
#X connect 69 0 56 0;
#X connect 70 0 72 0;
#X connect 70 1 72 0;
#X connect 70 2 72 0;
#X connect 70 3 71 0;
#X connect 71 0 73 0;
#X connect 72 0 73 0;
#X connect 76 0 77 0;
#X connect 77 0 80 0;
#X connect 79 0 78 0;
#X connect 80 0 79 0;
#X connect 80 1 81 0;
#X connect 81 0 78 0;
#X connect 82 0 83 0;
#X connect 83 0 87 1;
#X connect 84 0 25 0;
#X connect 87 0 66 0;
#X connect 88 0 24 1;
#X connect 88 1 23 0;
#X connect 89 0 0 0;
#X connect 91 0 43 0;
#X connect 92 0 0 0;
