#N canvas 384 53 1120 804 10;
#X obj 824 725 outlet;
#X obj 201 59 inlet;
#X text 118 54 beat clock;
#X obj 480 240 spigot;
#X obj 481 50 inlet;
#X msg 561 184 1;
#X text 682 347 start recording with next event;
#X text 525 51 events;
#X obj 258 146 t b b b, f 21;
#X msg 402 181 0;
#X obj 722 30 inlet;
#N canvas 149 61 848 577 log-event 0;
#X msg 225 432 1e+06;
#X obj 193 401 t a b;
#X obj 165 130 f;
#X obj 193 358 list append;
#X obj 238 76 t b a;
#X obj 225 460 outlet;
#X obj 148 463 outlet;
#X obj 122 38 inlet;
#X text 124 14 seq clock;
#X obj 245 36 inlet;
#X text 300 456 output event and line number for text set;
#X text 297 480 very large line number ensures event added to end of
text file... i guess this would be a problem for more than 1 million
events..;
#X text 247 12 event to log;
#X text 391 10 phase diff (how much original seq started ahead or behind)
;
#X obj 166 172 +;
#X obj 167 214 moses 0;
#X obj 165 243 t b;
#X msg 167 271 0;
#X text 225 239 alwauys put first event on the beat (if it was played
ahead \, it will play right on top \, otherwise seq would start negative
time);
#X text 215 165 adjust seq by how much ahead or behind first note was
played;
#X obj 436 38 r \$0-phase-adjust;
#X connect 0 0 5 0;
#X connect 1 0 6 0;
#X connect 1 1 0 0;
#X connect 2 0 14 0;
#X connect 3 0 1 0;
#X connect 4 0 2 0;
#X connect 4 1 3 1;
#X connect 7 0 2 1;
#X connect 9 0 4 0;
#X connect 14 0 15 0;
#X connect 15 0 16 0;
#X connect 15 1 3 0;
#X connect 16 0 17 0;
#X connect 17 0 3 0;
#X connect 20 0 14 1;
#X restore 399 574 pd log-event;
#X text 907 732 use to clear text file;
#N canvas 6 50 634 296 write-dummy-length 0;
#X obj 129 85 t a b;
#X msg 171 127 0;
#X msg 129 47 list 0 length 1;
#X obj 129 18 inlet;
#X obj 120 193 outlet;
#X obj 185 192 outlet;
#X text 246 119 set first entry;
#X text 242 146 gets replaced with length when sequence recording stopped
, f 31;
#X connect 0 0 4 0;
#X connect 0 1 1 0;
#X connect 1 0 5 0;
#X connect 2 0 0 0;
#X connect 3 0 2 0;
#X restore 806 546 pd write-dummy-length;
#N canvas 10 50 868 754 write-length 0;
#X obj 256 530 t a b;
#X msg 289 564 0;
#X msg 256 499 list 0 length \$1;
#X obj 303 599 outlet;
#X obj 237 595 outlet;
#X obj 172 115 f;
#X obj 172 143 spigot;
#X msg 248 112 1, f 4;
#X msg 126 157 0;
#X obj 306 59 inlet;
#X obj 201 60 inlet;
#X obj 99 56 inlet;
#X text 47 34 bang to report, f 18;
#X text 204 34 clock;
#X text 314 31 enable;
#X text 294 141 when stopped write length to sequence \, but only if
recording., f 26;
#X obj 143 596 outlet;
#X obj 214 459 t f f;
#X obj 173 179 t b f;
#X obj 217 278 +;
#X obj 218 320 moses 0;
#X obj 216 349 t b;
#X msg 218 377 0;
#X obj 495 61 r \$0-phase-adjust;
#X text 266 271 adjust len by how much ahead or behind first note was
played;
#X text 276 345 dont have negative len;
#X connect 0 0 4 0;
#X connect 0 1 1 0;
#X connect 1 0 3 0;
#X connect 2 0 0 0;
#X connect 5 0 6 0;
#X connect 6 0 18 0;
#X connect 7 0 6 1;
#X connect 8 0 6 1;
#X connect 9 0 7 0;
#X connect 10 0 5 1;
#X connect 11 0 5 0;
#X connect 17 0 16 0;
#X connect 17 1 2 0;
#X connect 18 0 8 0;
#X connect 18 1 19 0;
#X connect 19 0 20 0;
#X connect 20 0 21 0;
#X connect 20 1 17 0;
#X connect 21 0 22 0;
#X connect 22 0 17 0;
#X connect 23 0 19 1;
#X restore 258 575 pd write-length;
#X text 409 145 close gate \, stop clock \, report length;
#X msg 330 219 stop;
#X obj 309 422 clocker;
#X msg 501 451 length 1e+06;
#X obj 722 67 route stop arm;
#X text 766 27 controls;
#X text 829 138 set trigger \, open gate;
#X obj 769 132 t b b;
#X text 907 714 bang on start recording;
#X text 699 383 bang on start \, write dummy length \, set init time
0 \, start clock \, enable length writing;
#X obj 309 373 r \$0clock-control;
#X obj 330 248 s \$0clock-control;
#X obj 484 498 s \$0clock-control;
#X obj 764 452 s \$0recording;
#X obj 824 691 r \$0recording;
#X obj 360 523 r \$0recording;
#X obj 258 703 outlet;
#X text 315 704 report length;
#X text 796 234 only note ons trigger record;
#N canvas 510 246 450 300 once 0;
#X obj 114 61 inlet;
#X obj 203 37 inlet;
#X obj 114 215 outlet;
#X obj 114 137 == 1;
#X obj 114 115 i 0;
#X obj 114 162 sel 1;
#X obj 114 184 t b b;
#X msg 206 152 0;
#X msg 203 62 1;
#X text 252 38 reset;
#X connect 0 0 4 0;
#X connect 1 0 8 0;
#X connect 3 0 5 0;
#X connect 4 0 3 0;
#X connect 5 0 6 0;
#X connect 6 0 2 0;
#X connect 6 1 7 0;
#X connect 7 0 4 1;
#X connect 8 0 4 1;
#X restore 512 347 pd once - - - - - - - -;
#X obj 480 268 t a b;
#X text 475 422 set max length for clocker;
#X obj 443 722 text set \$1-seq, f 27;
#X obj 178 115 t f f;
#X msg 602 500 0;
#X msg 387 452 start;
#X obj 644 468 f;
#X obj 512 383 t b b b b b b, f 26;
#X obj 664 541 - 360;
#X obj 645 503 moses 270;
#X text 718 493 calc how much ahead or behind beat for adusting subsequent
events. this also works for starting a note on the off beat;
#X obj 535 600 s \$0-phase-adjust;
#X connect 1 0 38 0;
#X connect 3 0 35 0;
#X connect 4 0 3 0;
#X connect 5 0 3 1;
#X connect 8 0 14 0;
#X connect 8 1 16 0;
#X connect 8 2 9 0;
#X connect 9 0 3 1;
#X connect 10 0 19 0;
#X connect 11 0 37 0;
#X connect 11 1 37 1;
#X connect 13 0 37 0;
#X connect 13 1 37 1;
#X connect 14 0 31 0;
#X connect 14 1 37 0;
#X connect 14 2 37 1;
#X connect 16 0 26 0;
#X connect 17 0 11 0;
#X connect 17 0 14 1;
#X connect 18 0 27 0;
#X connect 19 0 8 0;
#X connect 19 1 22 0;
#X connect 22 0 5 0;
#X connect 22 1 34 1;
#X connect 25 0 17 0;
#X connect 29 0 0 0;
#X connect 30 0 14 2;
#X connect 34 0 42 0;
#X connect 35 0 11 1;
#X connect 35 1 34 0;
#X connect 38 0 17 0;
#X connect 38 1 41 1;
#X connect 39 0 11 0;
#X connect 40 0 27 0;
#X connect 41 0 44 0;
#X connect 42 0 40 0;
#X connect 42 1 18 0;
#X connect 42 2 39 0;
#X connect 42 3 41 0;
#X connect 42 4 13 0;
#X connect 42 5 28 0;
#X connect 43 0 46 0;
#X connect 44 0 46 0;
#X connect 44 1 43 0;
